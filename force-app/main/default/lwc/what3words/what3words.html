<template>
    <div class="slds-p-around_medium">
        <article class="slds-card">
            <div class="slds-card__header slds-grid">
                <header class="slds-media slds-media_center slds-has-flexi-truncate slds-p-around_small">
                    <div class="slds-media__figure">
                        <lightning-icon icon-name="standard:location" size="small"></lightning-icon>
                    </div>
                    <div class="slds-media__body">
                        <h2 class="slds-card__header-title slds-truncate">Carte interactive what3words Leaflet</h2>
                        <p class="slds-text-body_small slds-text-color_weak">Survolez la carte pour voir l'adresse ///, cliquez pour ouvrir w3w.co</p>
                    </div>
                </header>
            </div>

            <div class="slds-card__body slds-card__body_inner">
                <!-- Header box pour afficher les 3 mots -->
                <div class="slds-box slds-theme_default slds-m-bottom_small slds-p-around_small">
                    <template if:true={currentWords}>
                        <div class="slds-text-heading_small">///{currentWords}</div>
                        <div class="slds-text-body_small slds-text-color_weak">Coordonnées: {currentLat}, {currentLng}</div>
                    </template>
                    <template if:false={currentWords}>
                        <div class="slds-text-body_regular slds-text-color_weak">Survolez la carte pour voir les 3 mots…</div>
                    </template>
                    <template if:true={isLoading}>
                        <div class="slds-text-body_small slds-text-color_weak">
                            <lightning-spinner size="x-small" class="slds-m-right_x-small"></lightning-spinner>
                            Récupération en cours...
                        </div>
                    </template>
                </div>

                <!-- Container pour la carte Leaflet -->
                <div class="map-container" lwc:dom="manual"></div>
            </div>

            <footer class="slds-card__footer slds-p-around_small">
                <span class="slds-text-body_small slds-text-color_weak">Carte Leaflet.js avec API what3words en temps réel</span>
            </footer>
        </article>
    </div>
</template>
